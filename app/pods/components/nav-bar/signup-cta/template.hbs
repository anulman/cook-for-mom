<button type='button'
  class='btn btn-outline-primary {{if isNudging 'bg-none text-dark' 'bg-primary text-white'}}'>
  {{unless didSubmit 'Sign up today!' 'Follow & Share'}}
</button>

{{#bs-tooltip
  position='bottom'
  visible=isNudging
  layout='bs-tooltip'
  onHidden=(action cancelNudge) as |tooltip|}}
  {{#form-signup
    didSubmit=didSubmit
    shouldFocusInput=isNudging
    onSubmit=(action onSubmit) as |form|}}
    {{#form.header}}
      {{#if form.isSubmitted}}
        {{form.thanks.header}}
      {{else}}
        <em>Enter your email</em> below and <em>immediately</em>
        receive your <em>free</em> Mother's Day <em>meal plan</em>!
      {{/if}}
    {{/form.header}}

    {{#form.main class=(if form.isSubmitted 'is-submitted')}}
      {{#if form.isSubmitted}}
        {{form.thanks.main}}
      {{else}}
        <input type='email' class='form-control'
          tabindex=1
          placeholder='julias.child@cookformom.com'
          onfocus={{action (mut isInputFocused) true}}
          onblur={{action (mut isInputFocused) false}}
          onkeydown={{action form.keydown}}
          oninput={{action onInput value='target.value'}}
          aria-label="Your email"
          value={{email}}>

        {{#if (and
          (not validations.isValid)
          (gt email.length 0)
          (not isInputFocused)
        )}}
          <div class='invalid-feedback d-block'>
            {{map validations.attrs.email.errors by='message'}}
          </div>
        {{/if}}

        <button class='btn bg-primary btn-outline-primary text-white' type='button'
          disabled={{not validations.isValid}}
          onclick={{action form.submit}}>
          Sign Me Up
        </button>
      {{/if}}
    {{/form.main}}

    {{#form.footer class=(if form.isSubmitted 'mt-4' 'small')}}
      {{#if form.isSubmitted}}
        <button class='btn btn-link'
          onclick={{action tooltip.hide}}>
          Close
        </button>

        or

        {{form.thanks.footer}}
      {{else}}
        100% private; your information is not for sale.
        <button class='btn btn-link'
          onclick={{action tooltip.hide}}>
          Close
        </button>
      {{/if}}
    {{/form.footer}}
  {{/form-signup}}
{{/bs-tooltip}}
